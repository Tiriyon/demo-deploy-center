{{- /*
Template for OCP ingress controller TLS secret.
Provide wildcard certificate and key for *.apps.<cluster-name>.base.domain e.g *.apps.ocpsys.fibi.corp
*/}}
apiVersion: v1
kind: Secret
metadata:
  name: ldap-secret
  namespace: openshift-config
type: Opaque
data:
{{- $wutcluster := .Values.wutcluster -}}
{{- $tls_dir := printf "clusters/%s/ldap/*" $wutcluster }}
{{- $files := .Files.Glob $tls_dir }}
{{- range $path, $_ := $files }}
  bindPassword: {{ tpl ($.Files.Get $path) $|b64enc | trimSuffix "\n"  }}
{{- end }}
